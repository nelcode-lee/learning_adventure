<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Island - English Learning Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
            min-height: 100vh;
            color: #2d3748;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Navigation Bar */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #32CD32 0%, #98FB98 100%);
            padding: 10px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            text-decoration: none;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .nav-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        /* Adjust main container for fixed nav */
        body {
            padding-top: 60px;
        }

        .header {
            text-align: center;
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 3em;
            color: #32CD32;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.3em;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .reading-island {
            background: linear-gradient(135deg, #FFE4B5 0%, #F0E68C 100%);
            border: 3px solid #DAA520;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .island-title {
            text-align: center;
            font-size: 2.5em;
            color: #8B4513;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .reading-areas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .reading-area {
            background: linear-gradient(135deg, #FFB6C1 0%, #DDA0DD 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 2px solid transparent;
        }

        .reading-area:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-color: #DAA520;
        }

        .reading-area.completed {
            background: linear-gradient(135deg, #90EE90 0%, #98FB98 100%);
            border-color: #32CD32;
        }

        .reading-area.current {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-color: #FFD700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .area-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .area-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .area-description {
            font-size: 1em;
            color: #4a5568;
            line-height: 1.4;
        }

        .game-panel {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .game-info {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-title {
            font-size: 2em;
            color: #8B4513;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .game-description {
            font-size: 1.2em;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat {
            background: linear-gradient(135deg, #F5DEB3 0%, #DEB887 100%);
            padding: 15px 20px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-width: 120px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #8B4513;
            font-weight: bold;
        }

        .stat-value {
            font-size: 1.8em;
            color: #2d3748;
            font-weight: bold;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 20px;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #32CD32, #98FB98);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .challenge-area {
            background: linear-gradient(135deg, #FFE4B5 0%, #F0E68C 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #DAA520;
            transition: all 0.3s ease;
        }

        .challenge-area.active {
            border: 3px solid #8B4513;
            box-shadow: 0 0 20px rgba(139, 69, 19, 0.3);
            animation: pulse 2s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .challenge-question {
            font-size: 1.5em;
            color: #8B4513;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .reading-passage {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #DAA520;
            font-size: 1.1em;
            line-height: 1.6;
            color: #2d3748;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .option {
            background: linear-gradient(135deg, #32CD32 0%, #98FB98 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .option.correct {
            background: linear-gradient(135deg, #228B22 0%, #32CD32 100%);
            animation: correct 0.6s ease;
        }

        .option.incorrect {
            background: linear-gradient(135deg, #DC143C 0%, #FF4500 100%);
            animation: incorrect 0.6s ease;
        }

        @keyframes correct {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes incorrect {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        .feedback {
            font-size: 1.4em;
            font-weight: bold;
            margin: 20px 0;
            height: 30px;
        }

        .feedback.correct {
            color: #228B22;
        }

        .feedback.incorrect {
            color: #DC143C;
        }

        .word-game {
            background: linear-gradient(135deg, #E6E6FA 0%, #DDA0DD 100%);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #DDA0DD;
        }

        .word-practice {
            background: linear-gradient(135deg, #FFE4B5 0%, #F0E68C 100%);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #DAA520;
        }

        .word-syllables {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .syllable {
            background: linear-gradient(135deg, #32CD32 0%, #98FB98 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .pronunciation-guide {
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid #DAA520;
            font-style: italic;
            color: #8B4513;
        }

        .scroll-to-question {
            background: linear-gradient(135deg, #8B4513 0%, #DAA520 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 0;
        }

        .scroll-to-question:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .word-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #32CD32;
            border-radius: 10px;
            font-size: 1.1em;
            font-family: inherit;
            margin-bottom: 15px;
        }

        .word-input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
        }

        .submit-btn {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .completion-screen {
            text-align: center;
            background: linear-gradient(135deg, #FFD700 0%, #DAA520 100%);
            padding: 40px;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(255,215,0,0.3);
        }

        .trophy-celebration {
            font-size: 6em;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        .hidden {
            display: none;
        }

        .show {
            display: block;
        }

        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
            }
            
            .stats {
                flex-direction: column;
            }
            
            .reading-areas {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="nav-bar">
        <a href="home.html" class="nav-logo">📚 Reading Island</a>
        <div class="nav-buttons">
            <a href="home.html" class="nav-btn">🏠 Home</a>
            <a href="science-island.html" class="nav-btn">🔬 Science</a>
            <a href="geography-island.html" class="nav-btn">🌍 Geography</a>
            <a href="history-island.html" class="nav-btn">⏰ History</a>
            <a href="art-island.html" class="nav-btn">🎨 Art</a>
            <a href="index.html" class="nav-btn">🔢 Math</a>
            <button class="nav-btn" onclick="showProgress()">📊 Progress</button>
            <button class="nav-btn" onclick="showHelp()">❓ Help</button>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>📚 Reading Island</h1>
            <p>Master reading skills through fun challenges and adventures!</p>
            <p>Based on Key Stage 2 English curriculum - Word reading, comprehension, and vocabulary!</p>
            <div id="age-indicator" style="background: rgba(255,255,255,0.9); padding: 10px; border-radius: 10px; margin-top: 15px; font-weight: bold; color: #8B4513;">
                🎯 Age-Appropriate Content: <span id="age-display">Loading...</span>
            </div>
        </div>

        <!-- Reading Island -->
        <div class="reading-island">
            <div class="island-title">Reading Adventure Areas</div>
            
            <div class="reading-areas">
                <div class="reading-area" onclick="startChallenge('word-reading')">
                    <div class="area-icon">🔤</div>
                    <div class="area-title">Word Reading</div>
                    <div class="area-description">Practice reading unfamiliar words and building vocabulary</div>
                </div>

                <div class="reading-area" onclick="startChallenge('comprehension')">
                    <div class="area-icon">📖</div>
                    <div class="area-title">Reading Comprehension</div>
                    <div class="area-description">Understand and analyze what you read</div>
                </div>

                <div class="reading-area" onclick="startChallenge('vocabulary')">
                    <div class="area-icon">📚</div>
                    <div class="area-title">Vocabulary Building</div>
                    <div class="area-description">Learn new words and their meanings</div>
                </div>

                <div class="reading-area" onclick="startChallenge('grammar')">
                    <div class="area-icon">✏️</div>
                    <div class="area-title">Grammar & Punctuation</div>
                    <div class="area-description">Master language rules and structure</div>
                </div>

                <div class="reading-area" onclick="startChallenge('spelling')">
                    <div class="area-icon">🔤</div>
                    <div class="area-title">Spelling Patterns</div>
                    <div class="area-description">Learn spelling rules and patterns</div>
                </div>

                <div class="reading-area" onclick="startChallenge('fluency')">
                    <div class="area-icon">⚡</div>
                    <div class="area-title">Reading Fluency</div>
                    <div class="area-description">Read with speed and expression</div>
                </div>
            </div>
        </div>

        <!-- Game Panel -->
        <div class="game-panel" id="game-panel">
            <div class="game-info">
                <div class="game-title" id="game-title">Welcome to Reading Island!</div>
                <div class="game-description" id="game-description">Choose a reading area to start your learning adventure!</div>
            </div>

            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Areas Completed</div>
                    <div class="stat-value" id="completed-areas">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Questions Answered</div>
                    <div class="stat-value" id="questions-answered">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Current Area</div>
                    <div class="stat-value" id="current-area">-</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress" style="width: 0%"></div>
            </div>

            <div class="challenge-area hidden" id="challenge-area">
                <button class="scroll-to-question" onclick="scrollToQuestion()">📖 Scroll to Question</button>
                <div class="challenge-question" id="challenge-question">Ready to read?</div>
                <div id="challenge-content"></div>
                <div class="options" id="options"></div>
                <div class="feedback" id="feedback"></div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div class="completion-screen hidden" id="completion-screen">
            <div class="trophy-celebration">🏆</div>
            <h2>🌟 Reading Master!</h2>
            <p>Congratulations! You've completed all reading challenges and mastered Key Stage 2 reading skills!</p>
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Total Areas</div>
                    <div class="stat-value">6</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Questions Mastered</div>
                    <div class="stat-value" id="final-questions">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Reading Level</div>
                    <div class="stat-value">Advanced</div>
                </div>
            </div>
            <div>
                <button class="option" onclick="restartReading()">🔄 Start New Reading Journey</button>
                <button class="option" onclick="window.location.href='home.html'">🏠 Return Home</button>
            </div>
        </div>
    </div>

    <script>
        let currentArea = null;
        let completedAreas = [];
        let questionsAnswered = 0;
        let totalAreas = 6;
        let currentQuestion = 0;
        let questions = [];
        let childAge = 7; // Default age

        // Load child's age from learning agreement
        function loadChildAge() {
            const agreement = JSON.parse(localStorage.getItem('learningAgreement') || '{}');
            childAge = agreement.childAge || 7;
            console.log(`Child's age loaded: ${childAge}`);
            console.log('Full agreement:', agreement);
            
            // Update the age display
            const ageDisplay = document.getElementById('age-display');
            if (ageDisplay) {
                ageDisplay.textContent = `${childAge} years old`;
            }
        }

        // This will be called by DOMContentLoaded event

        // Reusable function to shuffle arrays (Fisher-Yates algorithm)
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        const readingChallenges = {
            'word-reading': {
                title: 'Word Reading Challenge',
                description: 'Practice reading unfamiliar words and building vocabulary',
                getQuestions: function() {
                    if (childAge <= 7) {
                        return this.questionsAge7;
                    } else if (childAge <= 8) {
                        return this.questionsAge8;
                    } else if (childAge <= 9) {
                        return this.questionsAge9;
                    } else if (childAge <= 10) {
                        return this.questionsAge10;
                    } else {
                        return this.questionsAge11;
                    }
                },
                questionsAge7: [
                    {
                        type: 'word',
                        word: 'through',
                        question: 'How do you pronounce "through"?',
                        options: ['th-roo', 'th-rough', 'th-rew', 'th-row'],
                        correct: 'th-roo',
                        explanation: 'Through is pronounced "th-roo" - it\'s a tricky exception word!'
                    },
                    {
                        type: 'word',
                        word: 'enough',
                        question: 'How do you pronounce "enough"?',
                        options: ['en-ough', 'en-uff', 'en-ow', 'en-ew'],
                        correct: 'en-uff',
                        explanation: 'Enough is pronounced "en-uff" - another exception word!'
                    },
                    {
                        type: 'passage',
                        passage: 'The knight fought bravely against the fierce dragon. His sword gleamed in the sunlight.',
                        question: 'What does "fierce" mean in this sentence?',
                        options: ['Friendly and kind', 'Wild and dangerous', 'Small and weak', 'Slow and gentle'],
                        correct: 'Wild and dangerous',
                        explanation: 'Fierce means aggressive and dangerous, often used to describe wild animals.'
                    },
                    {
                        type: 'word',
                        word: 'brought',
                        question: 'How do you pronounce "brought"?',
                        options: ['brought', 'brawt', 'broot', 'browt'],
                        correct: 'brought',
                        explanation: 'Brought is pronounced as it looks - "brought" - it\'s the past tense of bring.'
                    },
                    {
                        type: 'passage',
                        passage: 'The ancient castle was surrounded by a moat filled with murky water.',
                        question: 'What does "murky" mean?',
                        options: ['Clear and clean', 'Dark and unclear', 'Warm and pleasant', 'Deep and wide'],
                        correct: 'Dark and unclear',
                        explanation: 'Murky means dark and unclear, often used to describe dirty or cloudy water.'
                    }
                ],
                questionsAge8: [
                    {
                        type: 'word',
                        word: 'though',
                        question: 'How do you pronounce "though"?',
                        options: ['th-ough', 'th-ow', 'th-oo', 'th-ew'],
                        correct: 'th-ow',
                        explanation: 'Though is pronounced "th-ow" - another example of "ough" having an unusual sound.'
                    },
                    {
                        type: 'word',
                        word: 'fortress',
                        question: 'What is a "fortress"?',
                        options: ['A small house', 'A strong castle', 'A garden', 'A bridge'],
                        correct: 'A strong castle',
                        explanation: 'A fortress is a strong building designed to protect people from attack, like a castle.'
                    },
                    {
                        type: 'passage',
                        passage: 'The children were delighted when they discovered a hidden treasure chest. Their excitement was contagious.',
                        question: 'What does "contagious" mean here?',
                        options: ['A disease', 'Spreading quickly', 'Very expensive', 'Hidden away'],
                        correct: 'Spreading quickly',
                        explanation: 'Contagious means spreading from one person to another, like excitement or laughter.'
                    },
                    {
                        type: 'word',
                        word: 'celestial',
                        question: 'What does "celestial" mean?',
                        options: ['Very bright', 'Relating to space', 'Very old', 'Very large'],
                        correct: 'Relating to space',
                        explanation: 'Celestial means relating to the sky or outer space, often used to describe stars and planets.'
                    },
                    {
                        type: 'passage',
                        passage: 'The astronomer peered through his telescope at the distant galaxy. The celestial bodies twinkled like diamonds.',
                        question: 'What does "determined" mean in this context?',
                        options: ['Confused and unsure', 'Strong-willed and focused', 'Tired and sleepy', 'Happy and excited'],
                        correct: 'Strong-willed and focused',
                        explanation: 'Determined means having a strong will to achieve something, not giving up easily.'
                    }
                ],
                questionsAge9: [
                    {
                        type: 'word',
                        word: 'velvet',
                        question: 'What does "velvet" describe?',
                        options: ['A type of fabric', 'A color', 'A sound', 'A smell'],
                        correct: 'A type of fabric',
                        explanation: 'Velvet is a soft, smooth fabric with a thick pile, often used for clothing or furniture.'
                    },
                    {
                        type: 'word',
                        word: 'mesmerized',
                        question: 'What does "mesmerized" mean?',
                        options: ['Bored and tired', 'Fascinated and spellbound', 'Angry and upset', 'Confused and lost'],
                        correct: 'Fascinated and spellbound',
                        explanation: 'Mesmerized means completely fascinated and unable to look away, like being under a spell.'
                    },
                    {
                        type: 'passage',
                        passage: 'The curious scientist conducted an experiment in her laboratory. She carefully observed the chemical reaction.',
                        question: 'What does "curious" mean in this context?',
                        options: ['Boring and dull', 'Interested in learning', 'Angry and upset', 'Tired and sleepy'],
                        correct: 'Interested in learning',
                        explanation: 'Curious means eager to learn and discover new things! 🔬'
                    },
                    {
                        type: 'word',
                        word: 'enough',
                        question: 'How do you pronounce "enough"?',
                        options: ['en-ough', 'en-uff', 'en-ow', 'en-ew'],
                        correct: 'en-uff',
                        explanation: 'Enough is pronounced "en-uff" - another tricky word!'
                    },
                    {
                        type: 'passage',
                        passage: 'The knight fought bravely against the fierce dragon. His sword gleamed in the sunlight.',
                        question: 'What does "fierce" mean?',
                        options: ['Friendly and kind', 'Wild and dangerous', 'Small and weak', 'Slow and gentle'],
                        correct: 'Wild and dangerous',
                        explanation: 'Fierce means aggressive and dangerous, like a wild animal! ⚔️'
                    }
                ],
                questionsAge10: [
                    {
                        type: 'passage',
                        passage: 'The ancient castle was surrounded by a moat filled with murky water. The drawbridge provided the only access to the fortress.',
                        question: 'What does "murky" mean?',
                        options: ['Clear and clean', 'Dark and unclear', 'Warm and pleasant', 'Deep and wide'],
                        correct: 'Dark and unclear',
                        explanation: 'Murky means dark and unclear, often used to describe dirty water.'
                    },
                    {
                        type: 'word',
                        word: 'fortress',
                        question: 'What is a "fortress"?',
                        options: ['A small house', 'A strong castle', 'A garden', 'A bridge'],
                        correct: 'A strong castle',
                        explanation: 'A fortress is a strong building designed to protect people from attack! 🏰'
                    },
                    {
                        type: 'passage',
                        passage: 'The children were delighted when they discovered a hidden treasure chest. Their excitement was contagious.',
                        question: 'What does "contagious" mean here?',
                        options: ['A disease', 'Spreading quickly', 'Very expensive', 'Hidden away'],
                        correct: 'Spreading quickly',
                        explanation: 'Contagious means spreading from one person to another, like excitement! 💎'
                    },
                    {
                        type: 'word',
                        word: 'though',
                        question: 'How do you pronounce "though"?',
                        options: ['th-ough', 'th-ow', 'th-oo', 'th-ew'],
                        correct: 'th-ow',
                        explanation: 'Though is pronounced "th-ow" - another example of tricky spelling!'
                    },
                    {
                        type: 'passage',
                        passage: 'The astronomer peered through his telescope at the distant galaxy. The celestial bodies twinkled like diamonds.',
                        question: 'What does "celestial" mean?',
                        options: ['Very bright', 'Relating to space', 'Very old', 'Very large'],
                        correct: 'Relating to space',
                        explanation: 'Celestial means relating to the sky or outer space, like stars and planets! 🌟'
                    }
                ],
                questionsAge11: [
                    {
                        type: 'passage',
                        passage: 'The magnificent dragon soared through the azure sky, its iridescent scales shimmering in the sunlight. The villagers watched in awe as the creature performed graceful aerial maneuvers.',
                        question: 'What does "magnificent" mean in this passage?',
                        options: ['Small and weak', 'Large and impressive', 'Quiet and shy', 'Fast and quick'],
                        correct: 'Large and impressive',
                        explanation: 'Magnificent means very large and impressive, often used to describe something grand or beautiful.'
                    },
                    {
                        type: 'word',
                        word: 'iridescent',
                        question: 'What does "iridescent" mean?',
                        options: ['Shiny and colorful', 'Dark and dull', 'Soft and smooth', 'Hard and rough'],
                        correct: 'Shiny and colorful',
                        explanation: 'Iridescent means showing colors that change when viewed from different angles, like a rainbow.'
                    },
                    {
                        type: 'passage',
                        passage: 'The curious scientist conducted an experiment in her laboratory. She carefully observed the chemical reaction, taking detailed notes about the fascinating results.',
                        question: 'What does "curious" mean in this context?',
                        options: ['Boring and dull', 'Interested in learning', 'Angry and upset', 'Tired and sleepy'],
                        correct: 'Interested in learning',
                        explanation: 'Curious means eager to learn or know something, showing interest in discovering new things.'
                    },
                    {
                        type: 'word',
                        word: 'through',
                        question: 'How do you pronounce "through"?',
                        options: ['th-roo', 'th-rough', 'th-rew', 'th-row'],
                        correct: 'th-roo',
                        explanation: 'Through is an exception word where "ough" sounds like "oo" - it doesn\'t follow normal spelling rules.'
                    },
                    {
                        type: 'passage',
                        passage: 'The knight fought bravely against the fierce dragon. His sword gleamed in the sunlight as he prepared for battle.',
                        question: 'What does "fierce" mean?',
                        options: ['Friendly and kind', 'Wild and dangerous', 'Small and weak', 'Slow and gentle'],
                        correct: 'Wild and dangerous',
                        explanation: 'Fierce means aggressive and dangerous, often used to describe wild animals or intense situations.'
                    },
                    {
                        type: 'word',
                        word: 'enough',
                        question: 'How do you pronounce "enough"?',
                        options: ['en-ough', 'en-uff', 'en-ow', 'en-ew'],
                        correct: 'en-uff',
                        explanation: 'Enough is another exception word where "ough" sounds like "uff" - it\'s an irregular spelling.'
                    },
                    {
                        type: 'passage',
                        passage: 'The ancient castle was surrounded by a moat filled with murky water. The drawbridge provided the only access to the fortress, which had stood for centuries.',
                        question: 'What does "murky" mean?',
                        options: ['Clear and clean', 'Dark and unclear', 'Warm and pleasant', 'Deep and wide'],
                        correct: 'Dark and unclear',
                        explanation: 'Murky means dark and unclear, often used to describe water that is dirty or cloudy.'
                    },
                    {
                        type: 'word',
                        word: 'fortress',
                        question: 'What is a "fortress"?',
                        options: ['A small house', 'A strong castle', 'A garden', 'A bridge'],
                        correct: 'A strong castle',
                        explanation: 'A fortress is a strong building designed to protect people from attack, like a castle.'
                    },
                    {
                        type: 'passage',
                        passage: 'The children were delighted when they discovered a hidden treasure chest in the attic. Their excitement was contagious, and soon everyone was searching for more secrets.',
                        question: 'What does "contagious" mean here?',
                        options: ['A disease', 'Spreading quickly', 'Very expensive', 'Hidden away'],
                        correct: 'Spreading quickly',
                        explanation: 'Contagious means spreading from one person to another, like excitement or laughter.'
                    },
                    {
                        type: 'passage',
                        passage: 'The astronomer peered through his telescope at the distant galaxy. The celestial bodies twinkled like diamonds against the velvet darkness of space.',
                        question: 'What does "celestial" mean?',
                        options: ['Very bright', 'Relating to space', 'Very old', 'Very large'],
                        correct: 'Relating to space',
                        explanation: 'Celestial means relating to the sky or outer space, often used to describe stars and planets.'
                    },
                    {
                        type: 'word',
                        word: 'velvet',
                        question: 'What does "velvet" describe?',
                        options: ['A type of fabric', 'A color', 'A sound', 'A smell'],
                        correct: 'A type of fabric',
                        explanation: 'Velvet is a soft, smooth fabric with a thick pile, often used for clothing or furniture.'
                    },
                    {
                        type: 'passage',
                        passage: 'The detective was determined to solve the mysterious case. She examined every clue carefully, knowing that the slightest detail might reveal the truth.',
                        question: 'What does "determined" mean?',
                        options: ['Confused and unsure', 'Strong-willed and focused', 'Tired and sleepy', 'Happy and excited'],
                        correct: 'Strong-willed and focused',
                        explanation: 'Determined means having a strong will to achieve something, not giving up easily.'
                    },
                    {
                        type: 'word',
                        word: 'though',
                        question: 'How do you pronounce "though"?',
                        options: ['th-ough', 'th-ow', 'th-oo', 'th-ew'],
                        correct: 'th-ow',
                        explanation: 'Though is pronounced like "th-ow" - another example of "ough" having an unusual sound.'
                    },
                    {
                        type: 'passage',
                        passage: 'The artist created a masterpiece that captivated everyone who saw it. The painting was so beautiful that visitors would stand for hours, mesmerized by its beauty.',
                        question: 'What does "mesmerized" mean?',
                        options: ['Bored and tired', 'Fascinated and spellbound', 'Angry and upset', 'Confused and lost'],
                        correct: 'Fascinated and spellbound',
                        explanation: 'Mesmerized means completely fascinated and unable to look away, like being under a spell.'
                    },
                    {
                        type: 'word',
                        word: 'brought',
                        question: 'How do you pronounce "brought"?',
                        options: ['brought', 'brawt', 'broot', 'browt'],
                        correct: 'brought',
                        explanation: 'Brought is the past tense of "bring" and is pronounced as it looks - another exception word.'
                    }
                ]
            },
            'comprehension': {
                title: 'Reading Comprehension Challenge',
                description: 'Understand and analyze what you read',
                getQuestions: function() {
                    if (childAge <= 7) {
                        return this.questionsAge7;
                    } else if (childAge <= 8) {
                        return this.questionsAge8;
                    } else if (childAge <= 9) {
                        return this.questionsAge9;
                    } else if (childAge <= 10) {
                        return this.questionsAge10;
                    } else {
                        return this.questionsAge11;
                    }
                },
                questionsAge7: [
                    {
                        type: 'passage',
                        passage: 'Tommy was excited about his first day at the new school. He packed his backpack with pencils, notebooks, and his favorite lunch. When he arrived, he saw many unfamiliar faces, but his teacher, Mrs. Johnson, greeted him warmly.',
                        question: 'How did Tommy feel about going to the new school?',
                        options: ['Scared and nervous', 'Excited and happy', 'Angry and upset', 'Bored and tired'],
                        correct: 'Excited and happy'
                    },
                    {
                        type: 'passage',
                        passage: 'The little cat sat on the soft mat. It was very happy.',
                        question: 'What was the cat sitting on?',
                        options: ['A chair', 'A soft mat', 'A table', 'A bed'],
                        correct: 'A soft mat'
                    },
                    {
                        type: 'passage',
                        passage: 'The red ball bounced high in the sky. It was fun to play with.',
                        question: 'What color was the ball?',
                        options: ['Blue', 'Red', 'Green', 'Yellow'],
                        correct: 'Red'
                    }
                ],
                questionsAge8: [
                    {
                        type: 'passage',
                        passage: 'The ancient castle stood on top of the hill, overlooking the village below. Its stone walls had weathered many storms over the centuries. Inside, the grand hall was decorated with tapestries telling stories of brave knights and noble kings.',
                        question: 'What is the main idea of this passage?',
                        options: ['The castle is old and historic', 'The village is small', 'The weather is stormy', 'The knights are brave'],
                        correct: 'The castle is old and historic'
                    },
                    {
                        type: 'passage',
                        passage: 'Sarah loved to read mystery books. She would spend hours in the library, searching for the next exciting story. Her favorite detective was Sherlock Holmes, who always solved the most puzzling cases.',
                        question: 'What type of books does Sarah enjoy?',
                        options: ['Romance novels', 'Mystery books', 'Science fiction', 'Poetry books'],
                        correct: 'Mystery books'
                    },
                    {
                        type: 'passage',
                        passage: 'The bright sun shone in the clear blue sky. It was a lovely day.',
                        question: 'What color was the sky?',
                        options: ['Gray', 'Blue', 'Green', 'Red'],
                        correct: 'Blue'
                    }
                ],
                questionsAge9: [
                    {
                        type: 'passage',
                        passage: 'The magnificent dragon soared through the azure sky, its iridescent scales shimmering in the sunlight. The villagers watched in awe as the creature performed graceful aerial maneuvers.',
                        question: 'What does "magnificent" mean in this passage?',
                        options: ['Small and weak', 'Large and impressive', 'Quiet and shy', 'Fast and quick'],
                        correct: 'Large and impressive'
                    },
                    {
                        type: 'passage',
                        passage: 'The curious scientist conducted an experiment in her laboratory. She carefully observed the chemical reaction, taking detailed notes about the fascinating results.',
                        question: 'What does "curious" mean in this context?',
                        options: ['Boring and dull', 'Interested in learning', 'Angry and upset', 'Tired and sleepy'],
                        correct: 'Interested in learning'
                    },
                    {
                        type: 'passage',
                        passage: 'The knight fought bravely against the fierce dragon. His sword gleamed in the sunlight as he prepared for battle.',
                        question: 'What does "fierce" mean?',
                        options: ['Friendly and kind', 'Wild and dangerous', 'Small and weak', 'Slow and gentle'],
                        correct: 'Wild and dangerous'
                    }
                ],
                questionsAge10: [
                    {
                        type: 'passage',
                        passage: 'The ancient castle was surrounded by a moat filled with murky water. The drawbridge provided the only access to the fortress, which had stood for centuries.',
                        question: 'What does "murky" mean?',
                        options: ['Clear and clean', 'Dark and unclear', 'Warm and pleasant', 'Deep and wide'],
                        correct: 'Dark and unclear'
                    },
                    {
                        type: 'passage',
                        passage: 'The children were delighted when they discovered a hidden treasure chest in the attic. Their excitement was contagious, and soon everyone was searching for more secrets.',
                        question: 'What does "contagious" mean here?',
                        options: ['A disease', 'Spreading quickly', 'Very expensive', 'Hidden away'],
                        correct: 'Spreading quickly'
                    },
                    {
                        type: 'passage',
                        passage: 'The astronomer peered through his telescope at the distant galaxy. The celestial bodies twinkled like diamonds against the velvet darkness of space.',
                        question: 'What does "celestial" mean?',
                        options: ['Very bright', 'Relating to space', 'Very old', 'Very large'],
                        correct: 'Relating to space'
                    }
                ],
                questionsAge11: [
                    {
                        type: 'passage',
                        passage: 'The magnificent dragon soared through the azure sky, its iridescent scales shimmering in the sunlight. The villagers watched in awe as the creature performed graceful aerial maneuvers.',
                        question: 'What does "magnificent" mean in this passage?',
                        options: ['Small and weak', 'Large and impressive', 'Quiet and shy', 'Fast and quick'],
                        correct: 'Large and impressive'
                    },
                    {
                        type: 'passage',
                        passage: 'The curious scientist conducted an experiment in her laboratory. She carefully observed the chemical reaction, taking detailed notes about the fascinating results.',
                        question: 'What does "curious" mean in this context?',
                        options: ['Boring and dull', 'Interested in learning', 'Angry and upset', 'Tired and sleepy'],
                        correct: 'Interested in learning'
                    },
                    {
                        type: 'passage',
                        passage: 'The knight fought bravely against the fierce dragon. His sword gleamed in the sunlight as he prepared for battle.',
                        question: 'What does "fierce" mean?',
                        options: ['Friendly and kind', 'Wild and dangerous', 'Small and weak', 'Slow and gentle'],
                        correct: 'Wild and dangerous'
                    }
                ],
                questions: [
                    {
                        type: 'passage',
                        passage: 'Tommy was excited about his first day at the new school. He packed his backpack with pencils, notebooks, and his favorite lunch. When he arrived, he saw many unfamiliar faces, but his teacher, Mrs. Johnson, greeted him warmly.',
                        question: 'How did Tommy feel about going to the new school?',
                        options: ['Scared and nervous', 'Excited and happy', 'Angry and upset', 'Bored and tired'],
                        correct: 'Excited and happy'
                    },
                    {
                        type: 'passage',
                        passage: 'The ancient castle stood on top of the hill, overlooking the village below. Its stone walls had weathered many storms over the centuries. Inside, the grand hall was decorated with tapestries telling stories of brave knights and noble kings.',
                        question: 'What is the main idea of this passage?',
                        options: ['The castle is old and historic', 'The village is small', 'The weather is stormy', 'The knights are brave'],
                        correct: 'The castle is old and historic'
                    },
                    {
                        type: 'passage',
                        passage: 'Sarah loved to read mystery books. She would spend hours in the library, searching for the next exciting story. Her favorite detective was Sherlock Holmes, who always solved the most puzzling cases.',
                        question: 'What type of books does Sarah enjoy?',
                        options: ['Romance novels', 'Mystery books', 'Science fiction', 'Poetry books'],
                        correct: 'Mystery books'
                    }
                ]
            },
            'vocabulary': {
                title: 'Vocabulary Building Challenge',
                description: 'Learn new words and their meanings',
                getQuestions: function() {
                    if (childAge <= 7) {
                        return this.questionsAge7;
                    } else if (childAge <= 8) {
                        return this.questionsAge8;
                    } else if (childAge <= 9) {
                        return this.questionsAge9;
                    } else if (childAge <= 10) {
                        return this.questionsAge10;
                    } else {
                        return this.questionsAge11;
                    }
                },
                questionsAge7: [
                    {
                        type: 'word',
                        word: 'happy',
                        question: 'What does "happy" mean?',
                        options: ['Sad', 'Happy', 'Angry', 'Tired'],
                        correct: 'Happy'
                    },
                    {
                        type: 'word',
                        word: 'big',
                        question: 'What is the opposite of "big"?',
                        options: ['Small', 'Large', 'Huge', 'Giant'],
                        correct: 'Small'
                    },
                    {
                        type: 'word',
                        word: 'fast',
                        question: 'What does "fast" mean?',
                        options: ['Slow', 'Fast', 'Big', 'Small'],
                        correct: 'Fast'
                    }
                ],
                questionsAge8: [
                    {
                        type: 'word',
                        word: 'enormous',
                        question: 'What is a synonym for "enormous"?',
                        options: ['Small', 'Huge', 'Quick', 'Bright'],
                        correct: 'Huge'
                    },
                    {
                        type: 'word',
                        word: 'delicious',
                        question: 'What is the opposite of "delicious"?',
                        options: ['Sweet', 'Tasty', 'Disgusting', 'Fresh'],
                        correct: 'Disgusting'
                    },
                    {
                        type: 'word',
                        word: 'brave',
                        question: 'Which word means the same as "brave"?',
                        options: ['Scared', 'Courageous', 'Happy', 'Sad'],
                        correct: 'Courageous'
                    }
                ],
                questionsAge9: [
                    {
                        type: 'word',
                        word: 'magnificent',
                        question: 'What does "magnificent" mean?',
                        options: ['Small and weak', 'Large and impressive', 'Quiet and shy', 'Fast and quick'],
                        correct: 'Large and impressive'
                    },
                    {
                        type: 'word',
                        word: 'curious',
                        question: 'What does "curious" mean?',
                        options: ['Boring and dull', 'Interested in learning', 'Angry and upset', 'Tired and sleepy'],
                        correct: 'Interested in learning'
                    },
                    {
                        type: 'word',
                        word: 'fierce',
                        question: 'What does "fierce" mean?',
                        options: ['Friendly and kind', 'Wild and dangerous', 'Small and weak', 'Slow and gentle'],
                        correct: 'Wild and dangerous'
                    }
                ],
                questionsAge10: [
                    {
                        type: 'word',
                        word: 'murky',
                        question: 'What does "murky" mean?',
                        options: ['Clear and clean', 'Dark and unclear', 'Warm and pleasant', 'Deep and wide'],
                        correct: 'Dark and unclear'
                    },
                    {
                        type: 'word',
                        word: 'contagious',
                        question: 'What does "contagious" mean?',
                        options: ['A disease', 'Spreading quickly', 'Very expensive', 'Hidden away'],
                        correct: 'Spreading quickly'
                    },
                    {
                        type: 'word',
                        word: 'celestial',
                        question: 'What does "celestial" mean?',
                        options: ['Very bright', 'Relating to space', 'Very old', 'Very large'],
                        correct: 'Relating to space'
                    }
                ],
                questionsAge11: [
                    {
                        type: 'word',
                        word: 'iridescent',
                        question: 'What does "iridescent" mean?',
                        options: ['Shiny and colorful', 'Dark and dull', 'Soft and smooth', 'Hard and rough'],
                        correct: 'Shiny and colorful'
                    },
                    {
                        type: 'word',
                        word: 'mesmerized',
                        question: 'What does "mesmerized" mean?',
                        options: ['Bored and tired', 'Fascinated and spellbound', 'Angry and upset', 'Confused and lost'],
                        correct: 'Fascinated and spellbound'
                    },
                    {
                        type: 'word',
                        word: 'azure',
                        question: 'What does "azure" mean?',
                        options: ['A type of blue', 'A type of red', 'A type of green', 'A type of yellow'],
                        correct: 'A type of blue'
                    }
                ],
                questions: [
                    {
                        type: 'word',
                        word: 'enormous',
                        question: 'What is a synonym for "enormous"?',
                        options: ['Small', 'Huge', 'Quick', 'Bright'],
                        correct: 'Huge'
                    },
                    {
                        type: 'word',
                        word: 'delicious',
                        question: 'What is the opposite of "delicious"?',
                        options: ['Sweet', 'Tasty', 'Disgusting', 'Fresh'],
                        correct: 'Disgusting'
                    },
                    {
                        type: 'word',
                        word: 'brave',
                        question: 'Which word means the same as "brave"?',
                        options: ['Scared', 'Courageous', 'Happy', 'Sad'],
                        correct: 'Courageous'
                    }
                ]
            },
            'grammar': {
                title: 'Grammar & Punctuation Challenge',
                description: 'Master language rules and structure',
                getQuestions: function() {
                    if (childAge <= 7) {
                        return this.questionsAge7;
                    } else if (childAge <= 8) {
                        return this.questionsAge8;
                    } else if (childAge <= 9) {
                        return this.questionsAge9;
                    } else if (childAge <= 10) {
                        return this.questionsAge10;
                    } else {
                        return this.questionsAge11;
                    }
                },
                questionsAge7: [
                    {
                        type: 'sentence',
                        sentence: 'The cat sat on the mat.',
                        question: 'What is the subject of this sentence?',
                        options: ['The cat', 'Sat', 'On', 'The mat'],
                        correct: 'The cat'
                    },
                    {
                        type: 'sentence',
                        sentence: 'She loves reading books.',
                        question: 'What is the verb in this sentence?',
                        options: ['She', 'Loves', 'Reading', 'Books'],
                        correct: 'Loves'
                    },
                    {
                        type: 'sentence',
                        sentence: 'The big dog ran fast.',
                        question: 'What word describes the dog?',
                        options: ['The', 'Big', 'Dog', 'Ran'],
                        correct: 'Big'
                    }
                ],
                questionsAge8: [
                    {
                        type: 'sentence',
                        sentence: 'She loves reading books, playing games, and drawing pictures.',
                        question: 'What punctuation mark is used to separate items in this list?',
                        options: ['Period', 'Comma', 'Question mark', 'Exclamation mark'],
                        correct: 'Comma'
                    },
                    {
                        type: 'sentence',
                        sentence: 'The children played happily in the park.',
                        question: 'What part of speech is "happily"?',
                        options: ['Noun', 'Verb', 'Adjective', 'Adverb'],
                        correct: 'Adverb'
                    },
                    {
                        type: 'sentence',
                        sentence: 'What time is it?',
                        question: 'What punctuation mark should be at the end?',
                        options: ['Period', 'Comma', 'Question mark', 'Exclamation mark'],
                        correct: 'Question mark'
                    }
                ],
                questionsAge9: [
                    {
                        type: 'sentence',
                        sentence: 'The magnificent dragon soared through the azure sky.',
                        question: 'What is the subject of this sentence?',
                        options: ['The magnificent dragon', 'Soared', 'Through', 'The azure sky'],
                        correct: 'The magnificent dragon'
                    },
                    {
                        type: 'sentence',
                        sentence: 'She carefully observed the chemical reaction.',
                        question: 'What part of speech is "carefully"?',
                        options: ['Noun', 'Verb', 'Adjective', 'Adverb'],
                        correct: 'Adverb'
                    },
                    {
                        type: 'sentence',
                        sentence: 'Wow! That was amazing!',
                        question: 'What punctuation mark shows excitement?',
                        options: ['Period', 'Comma', 'Question mark', 'Exclamation mark'],
                        correct: 'Exclamation mark'
                    }
                ],
                questionsAge10: [
                    {
                        type: 'sentence',
                        sentence: 'The ancient castle was surrounded by a moat filled with murky water.',
                        question: 'What is the main verb in this sentence?',
                        options: ['Was', 'Surrounded', 'Filled', 'With'],
                        correct: 'Surrounded'
                    },
                    {
                        type: 'sentence',
                        sentence: 'The children were delighted when they discovered a hidden treasure chest.',
                        question: 'What part of speech is "delighted"?',
                        options: ['Noun', 'Verb', 'Adjective', 'Adverb'],
                        correct: 'Adjective'
                    },
                    {
                        type: 'sentence',
                        sentence: 'The astronomer peered through his telescope at the distant galaxy.',
                        question: 'What is the object of the preposition "through"?',
                        options: ['His', 'Telescope', 'At', 'The distant galaxy'],
                        correct: 'Telescope'
                    }
                ],
                questionsAge11: [
                    {
                        type: 'sentence',
                        sentence: 'The magnificent dragon soared through the azure sky, its iridescent scales shimmering in the sunlight.',
                        question: 'What is the subject of the main clause?',
                        options: ['The magnificent dragon', 'Its iridescent scales', 'Shimmering', 'The sunlight'],
                        correct: 'The magnificent dragon'
                    },
                    {
                        type: 'sentence',
                        sentence: 'The curious scientist conducted an experiment in her laboratory, taking detailed notes about the fascinating results.',
                        question: 'What is the participle phrase in this sentence?',
                        options: ['The curious scientist', 'Conducted an experiment', 'Taking detailed notes', 'About the fascinating results'],
                        correct: 'Taking detailed notes'
                    },
                    {
                        type: 'sentence',
                        sentence: 'The knight fought bravely against the fierce dragon, his sword gleaming in the sunlight.',
                        question: 'What type of sentence structure is this?',
                        options: ['Simple', 'Compound', 'Complex', 'Compound-complex'],
                        correct: 'Compound'
                    }
                ],
                questions: [
                    {
                        type: 'sentence',
                        sentence: 'The cat sat on the mat.',
                        question: 'What is the subject of this sentence?',
                        options: ['The cat', 'Sat', 'On', 'The mat'],
                        correct: 'The cat'
                    },
                    {
                        type: 'sentence',
                        sentence: 'She loves reading books, playing games, and drawing pictures.',
                        question: 'What punctuation mark is used to separate items in this list?',
                        options: ['Period', 'Comma', 'Question mark', 'Exclamation mark'],
                        correct: 'Comma'
                    },
                    {
                        type: 'sentence',
                        sentence: 'The children played happily in the park.',
                        question: 'What part of speech is "happily"?',
                        options: ['Noun', 'Verb', 'Adjective', 'Adverb'],
                        correct: 'Adverb'
                    }
                ]
            },
            'spelling': {
                title: 'Spelling Patterns Challenge',
                description: 'Learn spelling rules and patterns',
                getQuestions: function() {
                    if (childAge <= 7) {
                        return this.questionsAge7;
                    } else if (childAge <= 8) {
                        return this.questionsAge8;
                    } else if (childAge <= 9) {
                        return this.questionsAge9;
                    } else if (childAge <= 10) {
                        return this.questionsAge10;
                    } else {
                        return this.questionsAge11;
                    }
                },
                questionsAge7: [
                    {
                        type: 'spelling',
                        word: 'cat',
                        question: 'Which spelling is correct?',
                        options: ['cat', 'kat', 'catt', 'catte'],
                        correct: 'cat'
                    },
                    {
                        type: 'spelling',
                        word: 'dog',
                        question: 'Which spelling is correct?',
                        options: ['dog', 'dogg', 'dawg', 'dogge'],
                        correct: 'dog'
                    },
                    {
                        type: 'spelling',
                        word: 'run',
                        question: 'Which spelling is correct?',
                        options: ['run', 'runn', 'ran', 'running'],
                        correct: 'run'
                    }
                ],
                questionsAge8: [
                    {
                        type: 'spelling',
                        word: 'beautiful',
                        question: 'Which spelling is correct?',
                        options: ['beutiful', 'beautiful', 'beautifull', 'beautifal'],
                        correct: 'beautiful'
                    },
                    {
                        type: 'spelling',
                        word: 'receive',
                        question: 'Which spelling is correct?',
                        options: ['recieve', 'receive', 'receeve', 'receve'],
                        correct: 'receive'
                    },
                    {
                        type: 'spelling',
                        word: 'through',
                        question: 'Which spelling is correct?',
                        options: ['thru', 'through', 'threw', 'thorough'],
                        correct: 'through'
                    }
                ],
                questionsAge9: [
                    {
                        type: 'spelling',
                        word: 'magnificent',
                        question: 'Which spelling is correct?',
                        options: ['magnificent', 'magnifisent', 'magnificint', 'magnifisent'],
                        correct: 'magnificent'
                    },
                    {
                        type: 'spelling',
                        word: 'curious',
                        question: 'Which spelling is correct?',
                        options: ['curious', 'curius', 'currious', 'curios'],
                        correct: 'curious'
                    },
                    {
                        type: 'spelling',
                        word: 'fierce',
                        question: 'Which spelling is correct?',
                        options: ['fierce', 'fierc', 'fiercce', 'fiercse'],
                        correct: 'fierce'
                    }
                ],
                questionsAge10: [
                    {
                        type: 'spelling',
                        word: 'murky',
                        question: 'Which spelling is correct?',
                        options: ['murky', 'murkey', 'murcky', 'murki'],
                        correct: 'murky'
                    },
                    {
                        type: 'spelling',
                        word: 'contagious',
                        question: 'Which spelling is correct?',
                        options: ['contagious', 'contagius', 'contagous', 'contagius'],
                        correct: 'contagious'
                    },
                    {
                        type: 'spelling',
                        word: 'celestial',
                        question: 'Which spelling is correct?',
                        options: ['celestial', 'celestal', 'celestiel', 'celestal'],
                        correct: 'celestial'
                    }
                ],
                questionsAge11: [
                    {
                        type: 'spelling',
                        word: 'iridescent',
                        question: 'Which spelling is correct?',
                        options: ['iridescent', 'iridiscent', 'iridesent', 'iridisent'],
                        correct: 'iridescent'
                    },
                    {
                        type: 'spelling',
                        word: 'mesmerized',
                        question: 'Which spelling is correct?',
                        options: ['mesmerized', 'mesmerised', 'mesmerized', 'mesmerized'],
                        correct: 'mesmerized'
                    },
                    {
                        type: 'spelling',
                        word: 'azure',
                        question: 'Which spelling is correct?',
                        options: ['azure', 'azur', 'azhure', 'azhure'],
                        correct: 'azure'
                    }
                ],
                questions: [
                    {
                        type: 'spelling',
                        word: 'beautiful',
                        question: 'Which spelling is correct?',
                        options: ['beutiful', 'beautiful', 'beautifull', 'beautifal'],
                        correct: 'beautiful'
                    },
                    {
                        type: 'spelling',
                        word: 'receive',
                        question: 'Which spelling is correct?',
                        options: ['recieve', 'receive', 'receeve', 'receve'],
                        correct: 'receive'
                    },
                    {
                        type: 'spelling',
                        word: 'believe',
                        question: 'Which spelling is correct?',
                        options: ['beleive', 'believe', 'belive', 'beleve'],
                        correct: 'believe'
                    }
                ]
            },
            'fluency': {
                title: 'Reading Fluency Challenge',
                description: 'Read with speed and expression',
                getQuestions: function() {
                    if (childAge <= 7) {
                        return this.questionsAge7;
                    } else if (childAge <= 8) {
                        return this.questionsAge8;
                    } else if (childAge <= 9) {
                        return this.questionsAge9;
                    } else if (childAge <= 10) {
                        return this.questionsAge10;
                    } else {
                        return this.questionsAge11;
                    }
                },
                questionsAge7: [
                    {
                        type: 'passage',
                        passage: 'The little cat sat on the soft mat. It was very happy.',
                        question: 'How should you read this passage?',
                        options: ['Very slowly', 'With expression and feeling', 'In a monotone voice', 'Very loudly'],
                        correct: 'With expression and feeling'
                    },
                    {
                        type: 'passage',
                        passage: 'The red ball bounced high in the sky. It was fun to play with.',
                        question: 'What should you do when you see an exclamation mark?',
                        options: ['Read slowly', 'Read with excitement', 'Read quietly', 'Skip the word'],
                        correct: 'Read with excitement'
                    },
                    {
                        type: 'passage',
                        passage: 'What time is it?',
                        question: 'How should you read a question?',
                        options: ['With a rising voice at the end', 'Very slowly', 'Very loudly', 'In a whisper'],
                        correct: 'With a rising voice at the end'
                    }
                ],
                questionsAge8: [
                    {
                        type: 'passage',
                        passage: 'The ancient castle stood on top of the hill, overlooking the village below.',
                        question: 'How should you read this descriptive passage?',
                        options: ['Very quickly', 'With clear pronunciation and expression', 'In a monotone', 'Very quietly'],
                        correct: 'With clear pronunciation and expression'
                    },
                    {
                        type: 'passage',
                        passage: 'Wow! That was amazing!',
                        question: 'How should you read this exclamation?',
                        options: ['With excitement and energy', 'Very slowly', 'In a whisper', 'In a monotone'],
                        correct: 'With excitement and energy'
                    },
                    {
                        type: 'passage',
                        passage: 'The bright sun shone in the clear blue sky. It was a lovely day.',
                        question: 'What helps you read fluently?',
                        options: ['Reading very slowly', 'Practicing regularly', 'Reading only once', 'Reading very loudly'],
                        correct: 'Practicing regularly'
                    }
                ],
                questionsAge9: [
                    {
                        type: 'passage',
                        passage: 'The magnificent dragon soared through the azure sky, its iridescent scales shimmering in the sunlight.',
                        question: 'How should you read this complex sentence?',
                        options: ['Very quickly', 'With clear pauses and expression', 'In a monotone', 'Very quietly'],
                        correct: 'With clear pauses and expression'
                    },
                    {
                        type: 'passage',
                        passage: 'The curious scientist conducted an experiment in her laboratory.',
                        question: 'What is important for reading fluency?',
                        options: ['Reading very slowly', 'Understanding what you read', 'Reading very loudly', 'Reading only once'],
                        correct: 'Understanding what you read'
                    },
                    {
                        type: 'passage',
                        passage: 'The knight fought bravely against the fierce dragon!',
                        question: 'How should you read this exciting sentence?',
                        options: ['With excitement and energy', 'Very slowly', 'In a whisper', 'In a monotone'],
                        correct: 'With excitement and energy'
                    }
                ],
                questionsAge10: [
                    {
                        type: 'passage',
                        passage: 'The ancient castle was surrounded by a moat filled with murky water. The drawbridge provided the only access to the fortress.',
                        question: 'How should you read this descriptive passage?',
                        options: ['Very quickly', 'With clear pronunciation and natural flow', 'In a monotone', 'Very quietly'],
                        correct: 'With clear pronunciation and natural flow'
                    },
                    {
                        type: 'passage',
                        passage: 'The children were delighted when they discovered a hidden treasure chest!',
                        question: 'How should you read this exciting sentence?',
                        options: ['With excitement and energy', 'Very slowly', 'In a whisper', 'In a monotone'],
                        correct: 'With excitement and energy'
                    },
                    {
                        type: 'passage',
                        passage: 'The astronomer peered through his telescope at the distant galaxy.',
                        question: 'What helps improve reading fluency?',
                        options: ['Reading very slowly', 'Regular practice and understanding', 'Reading very loudly', 'Reading only once'],
                        correct: 'Regular practice and understanding'
                    }
                ],
                questionsAge11: [
                    {
                        type: 'passage',
                        passage: 'The magnificent dragon soared through the azure sky, its iridescent scales shimmering in the sunlight. The villagers watched in awe as the creature performed graceful aerial maneuvers.',
                        question: 'How should you read this complex passage?',
                        options: ['Very quickly', 'With clear expression and natural flow', 'In a monotone', 'Very quietly'],
                        correct: 'With clear expression and natural flow'
                    },
                    {
                        type: 'passage',
                        passage: 'The curious scientist conducted an experiment in her laboratory, taking detailed notes about the fascinating results.',
                        question: 'What is essential for reading fluency?',
                        options: ['Reading very slowly', 'Comprehension and expression', 'Reading very loudly', 'Reading only once'],
                        correct: 'Comprehension and expression'
                    },
                    {
                        type: 'passage',
                        passage: 'The knight fought bravely against the fierce dragon, his sword gleaming in the sunlight!',
                        question: 'How should you read this exciting passage?',
                        options: ['With excitement and energy', 'Very slowly', 'In a whisper', 'In a monotone'],
                        correct: 'With excitement and energy'
                    }
                ],
                questions: [
                    {
                        type: 'passage',
                        passage: 'The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet at least once.',
                        question: 'What is special about this sentence?',
                        options: ['It\'s very long', 'It contains all alphabet letters', 'It\'s about animals', 'It\'s easy to read'],
                        correct: 'It contains all alphabet letters'
                    },
                    {
                        type: 'passage',
                        passage: 'Peter Piper picked a peck of pickled peppers. A peck of pickled peppers Peter Piper picked.',
                        question: 'What type of literary device is used in this sentence?',
                        options: ['Metaphor', 'Alliteration', 'Simile', 'Rhyme'],
                        correct: 'Alliteration'
                    },
                    {
                        type: 'passage',
                        passage: 'The wind whispered through the trees, creating a gentle rustling sound that soothed the sleeping children.',
                        question: 'What does "whispered" mean in this context?',
                        options: ['Shouted loudly', 'Made a soft sound', 'Stopped completely', 'Changed direction'],
                        correct: 'Made a soft sound'
                    }
                ]
            }
        };

        function startChallenge(areaId) {
            console.log('startChallenge called with areaId:', areaId);
            console.log('completedAreas:', completedAreas);
            
            if (completedAreas.includes(areaId)) {
                alert('You\'ve already completed this area! Try another one.');
                return;
            }

            currentArea = areaId;
            const challenge = readingChallenges[areaId];
            console.log('challenge found:', challenge);
            
            document.getElementById('game-title').textContent = challenge.title;
            document.getElementById('game-description').textContent = challenge.description;
            document.getElementById('current-area').textContent = challenge.title;
            
            // Update area styling
            updateAreaStyles();
            
            // Start the question sequence with age-appropriate questions
            questions = challenge.getQuestions ? challenge.getQuestions() : challenge.questions;
            console.log('Questions loaded:', questions);
            console.log('Number of questions:', questions.length);
            currentQuestion = 0;
            displayQuestion();
            
            document.getElementById('challenge-area').classList.remove('hidden');
            
            // Add active class for visual feedback
            document.getElementById('challenge-area').classList.add('active');
            
            // Scroll to the challenge area with smooth animation
            setTimeout(() => {
                document.getElementById('challenge-area').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 100);
            
            // Remove active class after animation
            setTimeout(() => {
                document.getElementById('challenge-area').classList.remove('active');
            }, 3000);
        }

        function updateAreaStyles() {
            // Reset all areas
            document.querySelectorAll('.reading-area').forEach(area => {
                area.classList.remove('current', 'completed');
            });
            
            // Mark current area
            if (currentArea) {
                const currentElement = document.querySelector(`[onclick="startChallenge('${currentArea}')"]`);
                if (currentElement) {
                    currentElement.classList.add('current');
                }
            }
            
            // Mark completed areas
            completedAreas.forEach(areaId => {
                const element = document.querySelector(`[onclick="startChallenge('${areaId}')"]`);
                if (element) {
                    element.classList.add('completed');
                }
            });
        }

        function displayQuestion() {
            console.log('displayQuestion called, currentQuestion:', currentQuestion, 'questions.length:', questions.length);
            if (currentQuestion >= questions.length) {
                completeArea();
                return;
            }

            const q = questions[currentQuestion];
            let content = '';
            
            if (q.type === 'passage') {
                content = `<div class="reading-passage">${q.passage}</div>`;
            } else if (q.type === 'word') {
                // Enhanced word display for word reading area
                if (currentArea === 'word-reading') {
                    const syllables = getSyllables(q.word);
                    const pronunciation = getPronunciation(q.word);
                    content = `
                        <div class="word-practice">
                            <h3 style="font-size: 2em; color: #8B4513; margin-bottom: 15px;">${q.word}</h3>
                            <div class="word-syllables">
                                ${syllables.map(syllable => `<span class="syllable">${syllable}</span>`).join('')}
                            </div>
                            <div class="pronunciation-guide">
                                <strong>Pronunciation:</strong> ${pronunciation}
                            </div>
                        </div>
                    `;
                } else {
                    content = `<div class="word-game"><h3>Word: <strong>${q.word}</strong></h3></div>`;
                }
            } else if (q.type === 'sentence') {
                content = `<div class="reading-passage"><strong>Sentence:</strong> ${q.sentence}</div>`;
            } else if (q.type === 'spelling') {
                content = `<div class="word-game"><h3>Spell the word: <strong>${q.word}</strong></h3></div>`;
            }
            
            document.getElementById('challenge-question').textContent = q.question;
            document.getElementById('challenge-content').innerHTML = content;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
                    // Always shuffle options to randomize correct answer position
        const shuffledOptions = shuffleArray([...q.options]);
        
        shuffledOptions.forEach(option => {
            const button = document.createElement('button');
            button.className = 'option';
            button.textContent = option;
            button.onclick = () => selectAnswer(option);
            optionsContainer.appendChild(button);
        });

            document.getElementById('feedback').textContent = '';
            
            // Scroll to the question area to ensure it's visible
            setTimeout(() => {
                document.getElementById('challenge-question').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }, 50);
        }

        function getSyllables(word) {
            // Simple syllable breakdown for common words
            const syllablePatterns = {
                'through': ['through'],
                'enough': ['e', 'nough'],
                'though': ['though'],
                'brought': ['brought'],
                'iridescent': ['ir', 'i', 'des', 'cent'],
                'magnificent': ['mag', 'nif', 'i', 'cent'],
                'curious': ['cur', 'i', 'ous'],
                'fierce': ['fierce'],
                'murky': ['mur', 'ky'],
                'fortress': ['for', 'tress'],
                'contagious': ['con', 'ta', 'gious'],
                'celestial': ['ce', 'les', 'tial'],
                'velvet': ['vel', 'vet'],
                'determined': ['de', 'ter', 'mined'],
                'mesmerized': ['mes', 'mer', 'ized']
            };
            
            return syllablePatterns[word.toLowerCase()] || [word];
        }

        function getPronunciation(word) {
            // Pronunciation guides for difficult words
            const pronunciations = {
                'through': 'th-roo (like "threw")',
                'enough': 'en-uff (like "stuff")',
                'though': 'th-ow (like "slow")',
                'brought': 'brought (like "caught")',
                'iridescent': 'ir-i-des-cent',
                'magnificent': 'mag-nif-i-cent',
                'curious': 'cur-i-ous',
                'fierce': 'fierce (like "pierce")',
                'murky': 'mur-ky',
                'fortress': 'for-tress',
                'contagious': 'con-ta-gious',
                'celestial': 'ce-les-tial',
                'velvet': 'vel-vet',
                'determined': 'de-ter-mined',
                'mesmerized': 'mes-mer-ized'
            };
            
            return pronunciations[word.toLowerCase()] || word;
        }

        function scrollToQuestion() {
            document.getElementById('challenge-question').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
        }

        function selectAnswer(answer) {
            const correct = questions[currentQuestion].correct;
            const options = document.querySelectorAll('.option');
            const explanation = questions[currentQuestion].explanation || '';
            
            options.forEach(option => {
                option.disabled = true;
                if (option.textContent === answer) {
                    if (answer === correct) {
                        option.classList.add('correct');
                        document.getElementById('feedback').textContent = 'Excellent! 🌟';
                        document.getElementById('feedback').className = 'feedback correct';
                    } else {
                        option.classList.add('incorrect');
                        document.getElementById('feedback').textContent = 'Try again! 💪';
                        document.getElementById('feedback').className = 'feedback incorrect';
                    }
                }
            });

            // Show explanation for word reading questions
            if (currentArea === 'word-reading' && explanation) {
                setTimeout(() => {
                    document.getElementById('feedback').innerHTML = `<div style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.9); border-radius: 8px; font-size: 0.9em; color: #2d3748;"><strong>💡 Learning Tip:</strong> ${explanation}</div>`;
                }, 1000);
            }

            setTimeout(() => {
                currentQuestion++;
                displayQuestion();
                document.getElementById('feedback').textContent = '';
            }, 3000);
        }

        function completeArea() {
            completedAreas.push(currentArea);
            questionsAnswered += questions.length;
            
            updateStats();
            updateAreaStyles();
            
            document.getElementById('challenge-area').classList.add('hidden');
            document.getElementById('game-title').textContent = 'Area Completed!';
            document.getElementById('game-description').textContent = `You've completed ${completedAreas.length} areas! Choose another area to continue your reading journey.`;
            
            // Check if all areas are completed
            if (completedAreas.length >= totalAreas) {
                showCompletion();
            }
        }

        function updateStats() {
            document.getElementById('completed-areas').textContent = completedAreas.length;
            document.getElementById('questions-answered').textContent = questionsAnswered;
            document.getElementById('progress').style.width = (completedAreas.length / totalAreas) * 100 + '%';
        }

        function showCompletion() {
            document.getElementById('game-panel').classList.add('hidden');
            document.getElementById('completion-screen').classList.remove('hidden');
            document.getElementById('final-questions').textContent = questionsAnswered;
        }

        function restartReading() {
            completedAreas = [];
            questionsAnswered = 0;
            currentArea = null;
            currentQuestion = 0;
            
            document.getElementById('completion-screen').classList.add('hidden');
            document.getElementById('game-panel').classList.remove('hidden');
            document.getElementById('challenge-area').classList.add('hidden');
            
            document.getElementById('game-title').textContent = 'Welcome to Reading Island!';
            document.getElementById('game-description').textContent = 'Choose a reading area to start your learning adventure!';
            document.getElementById('current-area').textContent = '-';
            
            updateStats();
            updateAreaStyles();
        }

        function showProgress() {
            const agreement = JSON.parse(localStorage.getItem('learningAgreement') || '{}');
            
            let progressMessage = `📊 Reading Island Progress\n\n`;
            progressMessage += `Child: ${agreement.childName || 'Reader'}\n`;
            progressMessage += `Age: ${agreement.childAge || 'Not set'} years old\n`;
            progressMessage += `Age-Appropriate Content: ✅\n`;
            progressMessage += `Areas Completed: ${completedAreas.length}/${totalAreas}\n`;
            progressMessage += `Questions Answered: ${questionsAnswered}\n`;
            progressMessage += `Progress: ${Math.round((completedAreas.length / totalAreas) * 100)}%\n\n`;
            
            if (completedAreas.length > 0) {
                progressMessage += `✅ Completed Areas:\n`;
                completedAreas.forEach(areaId => {
                    progressMessage += `• ${readingChallenges[areaId].title}\n`;
                });
            }
            
            progressMessage += `\n📚 Reading Skills: ${completedAreas.length >= totalAreas ? '🏆 Mastered!' : '⏳ Still Learning...'}\n`;
            progressMessage += `\nKeep reading! Knowledge awaits! 📖`;
            
            alert(progressMessage);
        }

        function showHelp() {
            let helpMessage = `❓ Reading Island Help\n\n`;
            helpMessage += `📚 How to Play:\n\n`;
            helpMessage += `1. 🏝️ Choose a Reading Area\n`;
            helpMessage += `   • Word Reading: Practice reading new words\n`;
            helpMessage += `   • Comprehension: Understand what you read\n`;
            helpMessage += `   • Vocabulary: Learn new words and meanings\n`;
            helpMessage += `   • Grammar: Master language rules\n`;
            helpMessage += `   • Spelling: Learn spelling patterns\n`;
            helpMessage += `   • Fluency: Read with speed and expression\n\n`;
            helpMessage += `2. 📖 Read and Answer\n`;
            helpMessage += `   • Read passages carefully\n`;
            helpMessage += `   • Choose the best answer\n`;
            helpMessage += `   • Learn from feedback\n\n`;
            helpMessage += `3. 🏆 Complete All Areas\n`;
            helpMessage += `   • Finish all 6 reading areas\n`;
            helpMessage += `   • Master Key Stage 2 skills\n`;
            helpMessage += `   • Earn your reading trophy\n\n`;
            helpMessage += `4. 📊 Track Progress\n`;
            helpMessage += `   • Monitor completed areas\n`;
            helpMessage += `   • Check questions answered\n`;
            helpMessage += `   • View learning progress\n\n`;
            helpMessage += `🔤 Word Reading Special Features:\n`;
            helpMessage += `• Syllable breakdown for difficult words\n`;
            helpMessage += `• Pronunciation guides for tricky spellings\n`;
            helpMessage += `• Learning tips after each question\n`;
            helpMessage += `• Exception word practice (through, enough, etc.)\n`;
            helpMessage += `• Context clues for vocabulary building\n\n`;
            helpMessage += `📖 Reading Skills Covered:\n`;
            helpMessage += `• Word reading and vocabulary\n`;
            helpMessage += `• Reading comprehension\n`;
            helpMessage += `• Grammar and punctuation\n`;
            helpMessage += `• Spelling patterns\n`;
            helpMessage += `• Reading fluency\n\n`;
            helpMessage += `Happy reading! 📚`;
            
            alert(helpMessage);
        }

        // Initialize the game when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Reading Island DOM loaded');
            loadChildAge();
            updateStats();
            updateAreaStyles();
        });
    </script>
</body>
</html> 